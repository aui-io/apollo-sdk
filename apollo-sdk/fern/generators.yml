# yaml-language-server: $schema=https://schema.buildwithfern.dev/generators-yml.json

api:
  specs:
    - openapi: openapi.json
    - asyncapi: asyncapi.yaml

default-group: local

groups:
  # Local development - generates SDKs to local file system
  local:
    generators:
      - name: fernapi/fern-typescript-sdk
        version: 3.27.0
        config:
          namespaceExport: Apollo
          shouldGenerateWebsocketClients: true
        output:
          location: local-file-system
          path: ../generated-sdks/typescript
      - name: fernapi/fern-python-sdk
        version: 4.32.2
        config:
          client_class_name: ApolloClient
          should_generate_websocket_clients: true
        output:
          location: local-file-system
          path: ../generated-sdks/python

  # Production - Publish to GitHub with automated npm/PyPI publishing
  production:
    generators:
      - name: fernapi/fern-typescript-sdk
        version: 3.27.0
        github:
          repository: aui-io/apollo-sdk
        config:
          namespaceExport: Apollo
          shouldGenerateWebsocketClients: true
        output:
          location: npm
          package-name: "@aui.io/apollo-sdk"
          token: ${NPM_TOKEN}
      - name: fernapi/fern-python-sdk
        version: 4.32.2
        github:
          repository: aui-io/apollo-sdk
        config:
          client_class_name: ApolloClient
          should_generate_websocket_clients: true
        output:
          location: pypi
          package-name: "aui-apollo-sdk"
          token: ${PYPI_TOKEN}

  # npm only (with GitHub)
  npm:
    generators:
      - name: fernapi/fern-typescript-sdk
        version: 3.27.0
        github:
          repository: aui-io/apollo-sdk
        config:
          namespaceExport: Apollo
          shouldGenerateWebsocketClients: true
        output:
          location: npm
          package-name: "@aui.io/apollo-sdk"
          token: ${NPM_TOKEN}

  # PyPI only (with GitHub)
  pypi:
    generators:
      - name: fernapi/fern-python-sdk
        version: 4.32.2
        github:
          repository: aui-io/apollo-sdk
        config:
          client_class_name: ApolloClient
          should_generate_websocket_clients: true
        output:
          location: pypi
          package-name: "aui-apollo-sdk"
          token: ${PYPI_TOKEN}
